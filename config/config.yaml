# 迁移工具配置文件

# 迁移配置
migrate:
  # 进度更新间隔（秒）
  progress_interval: 1

# ACL 工具配置
acl:
  # 目标 ACL 策略（private, public-read, public-read-write）
  target_acl: "public-read-write"
  # 并发处理线程数
  thread_count: 10
  # 批量处理大小
  batch_size: 100
  # 是否递归处理所有对象
  recursive: true
  # 处理前缀（可选，为空则处理整个桶）
  prefix: ""
  # 排除的文件后缀列表（可选）
  exclude_suffixes: []

# 并发配置
concurrency:
  # 并发迁移线程数
  thread_count: 20
  # 单线程上传块大小（字节）
  chunk_size: 5242880  # 5MB
  # 流式迁移阈值（10倍chunk_size）
  streaming_threshold: 52428800  # 50MB

# 重试配置
retry:
  # 重试次数
  max_attempts: 3
  # 重试间隔（秒）
  interval: 5

# 日志配置
log:
  # 日志路径
  path: ./migrate_log/
  # 日志级别（DEBUG/INFO/WARNING/ERROR/CRITICAL）
  level: DEBUG
  # 日志文件最大大小（MB）
  max_size: 100
  # 日志文件保留天数
  backup_count: 7

# 华为云OBS配置
obs:
  # OBS桶名
  bucket_name: "hydrogen-energy"
  # OBS endpoint
  endpoint: "https://obs.cn-southwest-2.myhuaweicloud.com"
  # 文件前缀过滤（可选）
  prefix: ""
  # 排除文件后缀列表（可选）
  exclude_suffixes: [".log", ".tmp"]

# 阿里云OSS配置
aliyun:
  # OSS桶名
  bucket_name: "aliyun-test-bucket"
  # OSS endpoint
  endpoint: "oss-cn-shanghai.aliyuncs.com"
  # 文件前缀过滤（可选）
  prefix: ""
  # 排除文件后缀列表（可选）
  exclude_suffixes: [".log", ".tmp"]

# 联通云OSS配置
oss:
  # OSS桶名(acl_tools获取该桶名称)
  bucket_name: "test-1"
  # OSS endpoint
  endpoint: "https://obs-tj.cucloud.cn"
  # 文件存储路径前缀（可选）
  target_prefix: ""
  # OSS客户端配置
  client:
    # 连接超时时间（秒）
    connect_timeout: 30
    # 读取超时时间（秒）
    read_timeout: 30
    # 连接池大小
    connection_pool_size: 100

# 多桶映射配置（优先级高于单独的obs/oss配置）
bucket_mappings:
  # 华为云OBS示例映射：将obs-bucket-1的文件迁移到oss-bucket-1
  # - source_type: "obs"
  #   source_bucket: "chat-ai"
  #   oss_bucket: "hf-test"
  #   source_prefix: ""          # OBS源路径前缀（可选）
  #   oss_prefix: ""          # OSS目标路径前缀（可选）
  #   exclude_suffixes: [".log", ".tmp"]  # 排除文件后缀（可选）
  # # 华为云OBS示例映射：将obs桶hf-app-logs的文件迁移到oss桶log-test
  # - source_type: "obs"
  #   source_bucket: "oiltax-wxapp-new"
  #   oss_bucket: "log-test"
  #   source_prefix: ""
  #   oss_prefix: ""
  #   exclude_suffixes: []
  # 华为云OBS示例映射：将obs桶healthy-code-new的文件迁移到oss桶test-1
  # - source_type: "obs"
  #   source_bucket: "healthy-code-new"
  #   oss_bucket: "hf-test"
  #   source_prefix: ""
  #   oss_prefix: ""
  #   exclude_suffixes: []
  # 阿里云OSS示例映射：将aliyun-bucket的文件迁移到oss-bucket
  # - source_type: "aliyun"
  #   source_bucket: "sdjyrecord"
  #   oss_bucket: "test-1"
  #   source_prefix: ""
  #   oss_prefix: ""
  #   exclude_suffixes: []

# 迁移配置
migrate:
  # 是否启用断点续传
  enable_resume: true
  # 每日汇总报告生成时间（小时）
  report_hour: 0
  # 进度更新间隔（秒）
  progress_interval: 5